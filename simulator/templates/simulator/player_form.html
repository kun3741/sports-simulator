{% extends 'simulator/base.html' %}

{% block title %}{% if form.instance.pk %}Редагувати Гравця{% else %}Створити Гравця{% endif %}{% endblock %}

{% block content %}
<h2>{% if form.instance.pk %}Редагувати: {{ form.instance.name }}{% else %}Створення нового гравця{% endif %}</h2>

<form method="post">
    {% csrf_token %}
    {{ form.non_field_errors }}

    {# Рендеримо поля моделі Player #}
    {% for field in form %}
        {% if field.name != 'goals' and field.name != 'assists' and field.name != 'games_played' %}
            <div class="form-group">
                <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                {{ field }}
                {% if field.help_text %}
                <small style="display: block; color: #666;">{{ field.help_text }}</small>
                {% endif %}
                {% for error in field.errors %}
                <p style="color: red;">{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}
    {% endfor %}

    {# Рендеримо поля статистики окремо, якщо вони є у формі #}
    {% if form.goals %}
        <hr>
        <h4>Статистика (опціонально)</h4>
         <div class="form-group">
            <label for="{{ form.goals.id_for_label }}">{{ form.goals.label }}</label>
            {{ form.goals }}
             {% for error in form.goals.errors %}<p style="color: red;">{{ error }}</p>{% endfor %}
        </div>
         <div class="form-group">
            <label for="{{ form.assists.id_for_label }}">{{ form.assists.label }}</label>
            {{ form.assists }}
             {% for error in form.assists.errors %}<p style="color: red;">{{ error }}</p>{% endfor %}
        </div>
         <div class="form-group">
            <label for="{{ form.games_played.id_for_label }}">{{ form.games_played.label }}</label>
            {{ form.games_played }}
             {% for error in form.games_played.errors %}<p style="color: red;">{{ error }}</p>{% endfor %}
        </div>
    {% endif %}


    <button type="submit" class="btn">{% if form.instance.pk %}Зберегти зміни{% else %}Створити гравця{% endif %}</button>
    <a href="{% if form.instance.pk %}{% url 'simulator:player_detail' form.instance.pk %}{% else %}{% url 'simulator:player_list' %}{% endif %}" class="btn" style="background-color: #6c757d;">Скасувати</a>
</form>
{% endblock %}