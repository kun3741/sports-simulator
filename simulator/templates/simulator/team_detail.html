{% extends 'simulator/base.html' %}

{% block title %}{{ team.name }}{% endblock %}

{% block content %}
<h2>{{ team.name }}</h2>
<p><strong>Тренер:</strong> {{ team.coach|default:"Не вказано" }}</p>

<h3>Склад команди</h3>
{% with players=team.players.all %} {# Отримуємо гравців один раз #}
    {% if players %}
        <table>
             <thead>
                 <tr>
                     <th>Ім'я</th>
                     <th>Вік</th>
                     <th>Позиція</th>
                     <th>Голи</th>
                     <th>Асисти</th>
                     <th>Дії</th>
                 </tr>
             </thead>
             <tbody>
                {% for player in players %}
                <tr>
                    <td><a href="{% url 'simulator:player_detail' player.id %}">{{ player.name }}</a></td>
                    <td>{{ player.age }}</td>
                    <td>{{ player.position|default:"N/A" }}</td>
                    {# Доступ до статистики через related_name #}
                    <td>{{ player.statistics.goals|default:0 }}</td>
                    <td>{{ player.statistics.assists|default:0 }}</td>
                    <td><a href="{% url 'simulator:player_detail' player.id %}" class="btn">Деталі гравця</a></td>
                </tr>
                {% endfor %}
             </tbody>
        </table>
    {% else %}
        <p>У команді ще немає гравців.</p>
    {% endif %}
{% endwith %}
{# Посилання на додавання гравця до команди (якщо не через адмінку) #}
{# <a href="{% url 'simulator:player_create' %}?team_id={{ team.id }}" class="btn">+ Додати гравця</a> #}


<h3>Турніри, в яких бере участь</h3>
{% if team.tournaments.all %}
    <ul>
        {% for tournament in team.tournaments.all %}
            <li><a href="{% url 'simulator:tournament_detail' tournament.id %}">{{ tournament.name }}</a></li>
        {% endfor %}
    </ul>
{% else %}
    <p>Команда не бере участь у жодному турнірі.</p>
{% endif %}

<br>
<a href="{% url 'simulator:team_list' %}" class="btn">До списку команд</a>
<a href="{% url 'simulator:team_update' team.id %}" class="btn">Редагувати команду</a>
<a href="{% url 'simulator:team_recommendations' team.id %}" class="btn" style="background-color: #17a2b8;">Отримати Рекомендації</a>
{% endblock %}